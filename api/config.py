"""
‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è WhatsApp –±–æ—Ç–∞ ‚Äî –î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä
–ú–µ–Ω—é, –ø–µ—Ä–µ–≤–æ–¥—ã, –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ, –ø–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
"""

import os, re

# ==========================================
# ‚öôÔ∏è API –ö–õ–Æ–ß–ò
# ==========================================

WHATSAPP_TOKEN = os.getenv("WHATSAPP_TOKEN", "")
WHATSAPP_PHONE_ID = os.getenv("WHATSAPP_PHONE_ID", "929651966907277")
VERIFY_TOKEN = os.getenv("VERIFY_TOKEN", "dyadya-steak-2024")
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN", "")
TELEGRAM_CHAT_ID = os.getenv("TELEGRAM_CHAT_ID", "")
UPSTASH_REDIS_REST_URL = os.getenv("UPSTASH_REDIS_REST_URL", "")
UPSTASH_REDIS_REST_TOKEN = os.getenv("UPSTASH_REDIS_REST_TOKEN", "")

# ==========================================
# üè™ –ë–ò–ó–ù–ï–°
# ==========================================

BIZ = {
    "name": "–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä",
    "phone": "+7 700 179 83 20",
    "instagram": "@dyadyasteak.shop",
    "address": "–ø—Ä. –ñ–∞–π–±–µ–∫–æ–≤–∞ 110",
    "hours": "13:00 ‚Äî 01:00",
    "delivery_hours": "13:00 ‚Äî 01:00",
    "min_order": 2000,
    "delivery_fee_min": 200,
    "delivery_fee_max": 2000,
    "delivery_time": "30-50",
}

# ==========================================
# üåê –ü–ï–†–ï–í–û–î–´
# ==========================================

T = {
    "welcome": {
        "ru": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ *–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä*! üçîüî•\n\n–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / –¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑:",
        "kz": "–°”ô–ª–µ–º–µ—Ç—Å—ñ–∑ –±–µ! üëã\n*–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä*-“õ–∞ “õ–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑! üçîüî•\n\n–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑ / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:",
    },
    "main_menu": {
        "ru": "üçî *–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä*\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –º–µ–Ω—é –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –∑–∞–∫–∞–∑ —Ç–µ–∫—Å—Ç–æ–º üí¨\n\n_–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´2 —Å—ã—Ä–Ω—ã—Ö –≥–æ–≤—è–∂—å–∏—Ö –∏ –∫–æ–ª—É¬ª_",
        "kz": "üçî *–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä*\n\n–ú”ô–∑—ñ—Ä–¥–µ–Ω —Ç–∞“£–¥–∞“£—ã–∑ –Ω–µ–º–µ—Å–µ —Ç–∞–ø—Å—ã—Ä—ã—Å—Ç—ã –º”ô—Ç—ñ–Ω —Ä–µ—Ç—ñ–Ω–¥–µ –∂–∞–∑—ã“£—ã–∑ üí¨\n\n_–ú—ã—Å–∞–ª—ã: ¬´2 —Å—ã—Ä–Ω—ã–π –≥–æ–≤—è–∂–∏–π –∂”ô–Ω–µ –∫–æ–ª–∞¬ª_",
    },
    "choose_category": {
        "ru": "üìã *–ú–µ–Ω—é*\n–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –∑–∞–∫–∞–∑ —Ç–µ–∫—Å—Ç–æ–º üí¨",
        "kz": "üìã *–ú”ô–∑—ñ—Ä*\n–°–∞–Ω–∞—Ç—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑ –Ω–µ–º–µ—Å–µ –º”ô—Ç—ñ–Ω –∂–∞–∑—ã“£—ã–∑ üí¨",
    },
    "choose_qty": {"ru": "–°–∫–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å?", "kz": "“ö–∞–Ω—à–∞ “õ–æ—Å—É –∫–µ—Ä–µ–∫?"},
    "added": {"ru": "‚úÖ *{name}* x{qty} –¥–æ–±–∞–≤–ª–µ–Ω!\n\nüõí –í –∫–æ—Ä–∑–∏–Ω–µ: {total} —Ç–≥", "kz": "‚úÖ *{name}* x{qty} “õ–æ—Å—ã–ª–¥—ã!\n\nüõí –°–µ–±–µ—Ç—Ç–µ: {total} —Ç–≥"},
    "cart_empty": {"ru": "üõí –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞\n\n–ù–∞–ø–∏—à–∏—Ç–µ *–º–µ–Ω—é* –∏–ª–∏ –∑–∞–∫–∞–∂–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–º!", "kz": "üõí –°–µ–±–µ—Ç –±–æ—Å\n\n*–º”ô–∑—ñ—Ä* –∂–∞–∑—ã“£—ã–∑ –Ω–µ–º–µ—Å–µ –º”ô—Ç—ñ–Ω —Ä–µ—Ç—ñ–Ω–¥–µ —Ç–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—ñ“£—ñ–∑!"},
    "cart_title": {"ru": "üõí *–í–∞—à –∑–∞–∫–∞–∑:*", "kz": "üõí *–°—ñ–∑–¥—ñ“£ —Ç–∞–ø—Å—ã—Ä—ã—Å—ã“£—ã–∑:*"},
    "total": {"ru": "üí∞ –ò—Ç–æ–≥–æ", "kz": "üí∞ –ë–∞—Ä–ª—ã“ì—ã"},
    "min_warn": {"ru": "‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑: {min} —Ç–≥", "kz": "‚ö†Ô∏è –ï“£ –∞–∑ —Ç–∞–ø—Å—ã—Ä—ã—Å: {min} —Ç–≥"},
    "ask_address": {"ru": "üìç –ù–∞–ø–∏—à–∏—Ç–µ *–∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏*:\n(—É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞, –ø–æ–¥—ä–µ–∑–¥)", "kz": "üìç *–ñ–µ—Ç–∫—ñ–∑—É –º–µ–∫–µ–Ω-–∂–∞–π—ã–Ω* –∂–∞–∑—ã“£—ã–∑:\n(–∫”©—à–µ, “Ø–π, –ø”ô—Ç–µ—Ä)"},
    "ask_phone": {"ru": "üìû –ù–∞–ø–∏—à–∏—Ç–µ *–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞* –¥–ª—è —Å–≤—è–∑–∏:", "kz": "üìû –ë–∞–π–ª–∞–Ω—ã—Å *—Ç–µ–ª–µ—Ñ–æ–Ω –Ω”©–º—ñ—Ä—ñ–Ω* –∂–∞–∑—ã“£—ã–∑:"},
    "ask_payment": {"ru": "üí≥ –í—ã–±–µ—Ä–∏—Ç–µ *—Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã*:", "kz": "üí≥ *–¢”©–ª–µ–º ”ô–¥—ñ—Å—ñ–Ω* —Ç–∞“£–¥–∞“£—ã–∑:"},
    "ask_comment": {"ru": "üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É?", "kz": "üí¨ –¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞ –ø—ñ–∫—ñ—Ä?"},
    "confirm": {
        "ru": "üìã *–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–∫–∞–∑:*\n\n{cart}\n\nüìç –ê–¥—Ä–µ—Å: {addr}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: {phone}\nüí≥ –û–ø–ª–∞—Ç–∞: {pay}\nüí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {comment}\n\nüöö –î–æ—Å—Ç–∞–≤–∫–∞: ~{time} –º–∏–Ω\n‚ö†Ô∏è *–î–æ—Å—Ç–∞–≤–∫–∞ –ø–ª–∞—Ç–Ω–∞—è: –æ—Ç 700 —Ç–≥* (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Ä–æ–≥)\n\n–í—Å—ë –≤–µ—Ä–Ω–æ?",
        "kz": "üìã *–¢–∞–ø—Å—ã—Ä—ã—Å—Ç—ã —Ä–∞—Å—Ç–∞“£—ã–∑:*\n\n{cart}\n\nüìç –ú–µ–∫–µ–Ω-–∂–∞–π: {addr}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: {phone}\nüí≥ –¢”©–ª–µ–º: {pay}\nüí¨ –ü—ñ–∫—ñ—Ä: {comment}\n\nüöö –ñ–µ—Ç–∫—ñ–∑—É: ~{time} –º–∏–Ω\n‚ö†Ô∏è *–ñ–µ—Ç–∫—ñ–∑—É –∞“õ—ã–ª—ã: 700 —Ç–≥-–¥–µ–Ω* (–∂–æ–ª —Ç—ã“ì—ã–∑–¥—ã“ì—ã–Ω–∞ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã)\n\n–ë”ô—Ä—ñ –¥“±—Ä—ã—Å –ø–∞?",
    },
    "order_done": {
        "ru": "‚úÖ *–ó–∞–∫–∞–∑ #{id} –ø—Ä–∏–Ω—è—Ç!*\n\nüïê –û–∂–∏–¥–∞–π—Ç–µ ~{time} –º–∏–Ω\nüìû –ö—É—Ä—å–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–µ–∑–¥–æ–º\n\n‚ùå –î–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞: wa.me/77081798320\n\n–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ *–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä*! üçî‚ù§Ô∏è",
        "kz": "‚úÖ *–¢–∞–ø—Å—ã—Ä—ã—Å #{id} “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã!*\n\nüïê ~{time} –º–∏–Ω –∫“Ø—Ç—ñ“£—ñ–∑\nüìû –ö—É—Ä—å–µ—Ä –∫–µ–ª–µ—Ä –∞–ª–¥—ã–Ω–¥–∞ —Ö–∞–±–∞—Ä–ª–∞—Å–∞–¥—ã\n\n‚ùå –¢–∞–ø—Å—ã—Ä—ã—Å—Ç—ã –±–∞—Å —Ç–∞—Ä—Ç—É “Ø—à—ñ–Ω: wa.me/77081798320\n\n*–î—è–¥—è –°—Ç–µ–π–∫ –ë—É—Ä–≥–µ—Ä*-—Ç—ã —Ç–∞“£–¥–∞“ì–∞–Ω—ã“£—ã–∑“ì–∞ —Ä–∞—Ö–º–µ—Ç! üçî‚ù§Ô∏è",
    },
    "order_cancel": {"ru": "‚ùå –ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω.\n–ù–∞–ø–∏—à–∏—Ç–µ *–º–µ–Ω—é* –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞.", "kz": "‚ùå –¢–∞–ø—Å—ã—Ä—ã—Å –±–∞—Å —Ç–∞—Ä—Ç—ã–ª–¥—ã.\n–ñ–∞“£–∞ —Ç–∞–ø—Å—ã—Ä—ã—Å “Ø—à—ñ–Ω *–º”ô–∑—ñ—Ä* –∂–∞–∑—ã“£—ã–∑."},
    "faq_hours": {
        "ru": f"üïê *–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:*\n\n–†–µ—Å—Ç–æ—Ä–∞–Ω: {BIZ['hours']}\n–î–æ—Å—Ç–∞–≤–∫–∞: {BIZ['delivery_hours']}\n\n–ë–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö! üî•",
        "kz": f"üïê *–ñ“±–º—ã—Å —É–∞“õ—ã—Ç—ã:*\n\n–ú–µ–π—Ä–∞–º—Ö–∞–Ω–∞: {BIZ['hours']}\n–ñ–µ—Ç–∫—ñ–∑—É: {BIZ['delivery_hours']}\n\n–î–µ–º–∞–ª—ã—Å—Å—ã–∑! üî•",
    },
    "faq_delivery": {
        "ru": f"üöö *–î–æ—Å—Ç–∞–≤–∫–∞:*\n\nüí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: –æ—Ç {BIZ['delivery_fee_min']} –¥–æ {BIZ['delivery_fee_max']} —Ç–≥\n‚è± –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: ~{BIZ['delivery_time']} –º–∏–Ω",
        "kz": f"üöö *–ñ–µ—Ç–∫—ñ–∑—É:*\n\nüí∞ –ë–∞“ì–∞—Å—ã: {BIZ['delivery_fee_min']}-–¥–µ–Ω {BIZ['delivery_fee_max']} —Ç–≥-–≥–µ –¥–µ–π—ñ–Ω\n‚è± –û—Ä—Ç–∞—à–∞ —É–∞“õ—ã—Ç: ~{BIZ['delivery_time']} –º–∏–Ω",
    },
    "faq_payment": {
        "ru": "üí≥ *–û–ø–ª–∞—Ç–∞:*\n\n‚Ä¢ –ö–∞—Å–ø–∏ –ø–µ—Ä–µ–≤–æ–¥\n‚Ä¢ –ù–∞–ª–∏—á–Ω—ã–µ –∫—É—Ä—å–µ—Ä—É\n‚Ä¢ –ö–∞—Å–ø–∏ QR",
        "kz": "üí≥ *–¢”©–ª–µ–º:*\n\n‚Ä¢ –ö–∞—Å–ø–∏ –∞—É–¥–∞—Ä—ã–º\n‚Ä¢ “ö–æ–ª–º–∞-“õ–æ–ª –∫—É—Ä—å–µ—Ä–≥–µ\n‚Ä¢ –ö–∞—Å–ø–∏ QR",
    },
    "contacts": {
        "ru": f"üìû *–ö–æ–Ω—Ç–∞–∫—Ç—ã:*\n\nüè™ {BIZ['name']}\nüì± {BIZ['phone']}\nüì∑ {BIZ['instagram']}\nüìç {BIZ['address']}\nüïê {BIZ['hours']}",
        "kz": f"üìû *–ë–∞–π–ª–∞–Ω—ã—Å:*\n\nüè™ {BIZ['name']}\nüì± {BIZ['phone']}\nüì∑ {BIZ['instagram']}\nüìç {BIZ['address']}\nüïê {BIZ['hours']}",
    },
    "steaks_contact": {
        "ru": "ü•© *–°—Ç–µ–π–∫–∏*\n\n–î–ª—è –∑–∞–∫–∞–∑–∞ —Å—Ç–µ–π–∫–æ–≤ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é:\nüì± WhatsApp: +7 708 179 83 20\n\nhttps://wa.me/77081798320\n\n–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–¥–±–µ—Ä—ë—Ç –∏–¥–µ–∞–ª—å–Ω—ã–π —Å—Ç–µ–π–∫ –¥–ª—è –≤–∞—Å! üî•",
        "kz": "ü•© *–°—Ç–µ–π–∫—Ç–µ—Ä*\n\n–°—Ç–µ–π–∫ —Ç–∞–ø—Å—ã—Ä—ã—Å –±–µ—Ä—É “Ø—à—ñ–Ω –±—ñ–∑–±–µ–Ω —Ç—ñ–∫–µ–ª–µ–π –±–∞–π–ª–∞–Ω—ã—Å—ã“£—ã–∑:\nüì± WhatsApp: +7 708 179 83 20\n\nhttps://wa.me/77081798320\n\n–ú–µ–Ω–µ–¥–∂–µ—Ä —Å—ñ–∑–≥–µ —Ç–∞–º–∞—à–∞ —Å—Ç–µ–π–∫ —Ç–∞“£–¥–∞–π–¥—ã! üî•",
    },
    "text_order_confirm": {
        "ru": "üìù *–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ:*\n\n{items}\n\nüí∞ –ò—Ç–æ–≥–æ: *{total} —Ç–≥*\n\n–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É?",
        "kz": "üìù *–¢–∞–Ω—ã–ª–¥—ã:*\n\n{items}\n\nüí∞ –ë–∞—Ä–ª—ã“ì—ã: *{total} —Ç–≥*\n\n–°–µ–±–µ—Ç–∫–µ “õ–æ—Å—É –∫–µ—Ä–µ–∫ –ø–µ?",
    },
    "text_order_not_found": {
        "ru": "ü§î –ù–µ —Å–º–æ–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∑–∞–∫–∞–∑.\n\n–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ—â–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n_¬´2 —Å—ã—Ä–Ω—ã—Ö –≥–æ–≤—è–∂—å–∏—Ö –∏ –∫–æ–ª—É¬ª_\n_¬´—Ñ—Ä–∏ –∏ –∞–π—Ä–∞–Ω¬ª_\n\n–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ üìã *–º–µ–Ω—é*",
        "kz": "ü§î –¢–∞–ø—Å—ã—Ä—ã—Å—Ç—ã —Ç–∞–Ω–∏ –∞–ª–º–∞–¥—ã–º.\n\n–û“£–∞–π –∂–∞–∑—ã“£—ã–∑:\n_¬´2 —Å—ã—Ä–Ω—ã–π –≥–æ–≤—è–∂–∏–π –∂”ô–Ω–µ –∫–æ–ª–∞¬ª_\n_¬´—Ñ—Ä–∏ –∂”ô–Ω–µ –∞–π—Ä–∞–Ω¬ª_\n\n–ù–µ–º–µ—Å–µ üìã *–º”ô–∑—ñ—Ä* –∞—à—ã“£—ã–∑",
    },
    "unknown": {
        "ru": "–ù–µ –ø–æ–Ω—è–ª ü§î –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –º–µ–Ω—é –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –∑–∞–∫–∞–∑ —Ç–µ–∫—Å—Ç–æ–º!",
        "kz": "–¢“Ø—Å—ñ–Ω–±–µ–¥—ñ–º ü§î –ú”ô–∑—ñ—Ä–¥–µ–Ω —Ç–∞“£–¥–∞“£—ã–∑ –Ω–µ–º–µ—Å–µ –º”ô—Ç—ñ–Ω –∂–∞–∑—ã“£—ã–∑!",
    },
    "pay_kaspi": {"ru": "–ö–∞—Å–ø–∏ –ø–µ—Ä–µ–≤–æ–¥", "kz": "–ö–∞—Å–ø–∏ –∞—É–¥–∞—Ä—ã–º"},
    "pay_cash": {"ru": "–ù–∞–ª–∏—á–Ω—ã–µ", "kz": "“ö–æ–ª–º–∞-“õ–æ–ª"},
    "pay_qr": {"ru": "–ö–∞—Å–ø–∏ QR", "kz": "–ö–∞—Å–ø–∏ QR"},
    "no_comment": {"ru": "–ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤", "kz": "–ü—ñ–∫—ñ—Ä—Å—ñ–∑"},
    "no_onion": {"ru": "–ë–µ–∑ –ª—É–∫–∞", "kz": "–ü–∏—è–∑—Å—ã–∑"},
    "more_sauce": {"ru": "–ü–æ–±–æ–ª—å—à–µ —Å–æ—É—Å–∞", "kz": "–¢“±–∑–¥—ã“õ –∫”©–±—ñ—Ä–µ–∫"},
}

def t(key, lang="ru"):
    return T.get(key, {}).get(lang, T.get(key, {}).get("ru", key))


# ==========================================
# üìã –ú–ï–ù–Æ
# ==========================================

CATEGORIES = [
    {"id": "burgers", "ru": "üçî –ë—É—Ä–≥–µ—Ä—ã", "kz": "üçî –ë—É—Ä–≥–µ—Ä–ª–µ—Ä"},
    {"id": "hotdogs", "ru": "üå≠ –•–æ—Ç-–¥–æ–≥–∏", "kz": "üå≠ –•–æ—Ç-–¥–æ–≥—Ç–∞—Ä"},
    {"id": "doner",   "ru": "üåØ –î—è–¥—è –≤ –ª–∞–≤–∞—à–µ", "kz": "üåØ –î—è–¥—è –ª–∞–≤–∞—à—Ç–∞"},
    {"id": "steaks",  "ru": "ü•© –°—Ç–µ–π–∫–∏", "kz": "ü•© –°—Ç–µ–π–∫—Ç–µ—Ä"},
    {"id": "sausages","ru": "üå≠ –ö–æ–ª–±–∞—Å–∫–∏", "kz": "üå≠ –®“±–∂—ã“õ—Ç–∞—Ä"},
    {"id": "snacks",  "ru": "üçü –ó–∞–∫—É—Å–∫–∏", "kz": "üçü –¢—ñ—Å–∫–µ–±–∞—Å–∞—Ä"},
    {"id": "drinks",  "ru": "ü•§ –ù–∞–ø–∏—Ç–∫–∏", "kz": "ü•§ –°—É—Å—ã–Ω–¥–∞—Ä"},
    {"id": "extras",  "ru": "‚ûï –î–æ–±–∞–≤–∫–∏", "kz": "‚ûï “ö–æ—Å—ã–º—à–∞"},
]

MENU_ITEMS = [
    # –ë–£–†–ì–ï–†–´
    {"id": "b1", "cat": "burgers", "ru_name": "–î—è–¥—è –°—ã—Ä–Ω—ã–π", "kz_name": "–î—è–¥—è –°—ã—Ä–Ω—ã–π",
     "ru_desc": "–°—ã—Ä–∞ —Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ –¥–∞–∂–µ –∫–æ—Ç–ª–µ—Ç–∞ —É–ª—ã–±–∞–µ—Ç—Å—è",
     "kz_desc": "–ú“±–Ω–¥–∞ —ñ—Ä—ñ–º—à—ñ–∫—Ç—ñ“£ –∫”©–ø—Ç—ñ–≥—ñ —Å–æ–Ω—à–∞, —Ç—ñ–ø—Ç—ñ –∫–æ—Ç–ª–µ—Ç –∫“Ø–ª–µ–¥—ñ",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [
         {"id": "b1_beef", "ru": "üêÑ –ì–æ–≤—è–∂–∏–π", "kz": "üêÑ –°–∏—ã—Ä –µ—Ç—ñ", "price": 2990},
         {"id": "b1_chkn", "ru": "üêî –ö—É—Ä–∏–Ω—ã–π", "kz": "üêî –¢–∞—É—ã“õ –µ—Ç—ñ", "price": 2590},
     ]},
    {"id": "b2", "cat": "burgers", "ru_name": "–î—è–¥—è –ì—Ä–∏–±–Ω–æ–π", "kz_name": "–î—è–¥—è –ì—Ä–∏–±–Ω–æ–π",
     "ru_desc": "–°—Ç–æ–ª—å–∫–æ –≥—Ä–∏–±–æ–≤, —á—Ç–æ –∫–æ—Ç–ª–µ—Ç–∞ —Ç–µ–ø–µ—Ä—å –Ω–µ –æ–¥–Ω–∞ –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–µ",
     "kz_desc": "–°–∞“£—ã—Ä–∞—É“õ“±–ª–∞“õ—Ç–∞—Ä –∫”©–ø—Ç—ñ–≥—ñ —Å–æ–Ω—à–∞, –±“±–ª –∫–æ—Ç–ª–µ—Ç –∂–∞–ª“ì—ã–∑ –µ–º–µ—Å",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [
         {"id": "b2_beef", "ru": "üêÑ –ì–æ–≤—è–∂–∏–π", "kz": "üêÑ –°–∏—ã—Ä –µ—Ç—ñ", "price": 2790},
         {"id": "b2_chkn", "ru": "üêî –ö—É—Ä–∏–Ω—ã–π", "kz": "üêî –¢–∞—É—ã“õ –µ—Ç—ñ", "price": 2390},
     ]},
    {"id": "b3", "cat": "burgers", "ru_name": "–î—è–¥—è –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π", "kz_name": "–î—è–¥—è –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π",
     "ru_desc": "–ú—è—Å–æ —Å–æ—á–Ω–æ–µ, –æ–≤–æ—â–∏ —Å–≤–µ–∂–∏–µ, —Å–æ—É—Å–æ–≤ –º–Ω–æ–≥–æ, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ–µ",
     "kz_desc": "–®—ã—Ä—ã–Ω–¥—ã –µ—Ç, –±–∞–ª“ì—ã–Ω –∫”©–∫”©–Ω—ñ—Å—Ç–µ—Ä, —Ç“±–∑–¥—ã“õ—Ç–∞—Ä –∫”©–ø, –∫”©“£—ñ–ª-–∫“Ø–π –∫–µ—Ä–µ–º–µ—Ç",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [
         {"id": "b3_beef", "ru": "üêÑ –ì–æ–≤—è–∂–∏–π", "kz": "üêÑ –°–∏—ã—Ä –µ—Ç—ñ", "price": 2490},
         {"id": "b3_chkn", "ru": "üêî –ö—É—Ä–∏–Ω—ã–π", "kz": "üêî –¢–∞—É—ã“õ –µ—Ç—ñ", "price": 2090},
     ]},

    # –•–û–¢-–î–û–ì–ò
    {"id": "h1", "cat": "hotdogs", "ru_name": "–î—è–¥—è –¥–æ–≥-–≥—Ä–∏–±–Ω–æ–π", "kz_name": "–î—è–¥—è –¥–æ–≥-—Å–∞“£—ã—Ä–∞—É“õ“±–ª–∞“õ—Ç—ã",
     "ru_desc": "–°–æ—Å–∏—Å–∫–∞ —Å –≥—Ä–∏–±–∞–º–∏, —Å—ã—Ä–æ–º –∏ –ª—É–∫–æ–º. –¢—Ä—é—Ñ–µ–ª—å–Ω—ã–π —Å–æ—É—Å ‚Äî –≥–ª–∞–≤–Ω—ã–π DJ",
     "kz_desc": "–®“±–∂—ã“õ —Å–∞“£—ã—Ä–∞—É“õ“±–ª–∞“õ—Ç–∞—Ä–º–µ–Ω, —ñ—Ä—ñ–º—à—ñ–∫–ø–µ–Ω. –¢—Ä—é—Ñ–µ–ª—å —Ç“±–∑–¥—ã“ì—ã ‚Äî –±–∞—Å—Ç—ã DJ",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [
         {"id": "h1_firm", "ru": "–§–∏—Ä–º–µ–Ω–Ω–∞—è –∫–æ–ª–±–∞—Å–∞", "kz": "–§–∏—Ä–º–∞–ª—ã“õ —à“±–∂—ã“õ", "price": 1990},
         {"id": "h1_smok", "ru": "–ö–æ–ø—á—ë–Ω–∞—è –∫–æ–ª–±–∞—Å–∞", "kz": "–´—Å—Ç–∞“ì—ã–ª–∞–Ω —à“±–∂—ã“õ", "price": 1990},
     ]},
    {"id": "h2", "cat": "hotdogs", "ru_name": "–î—è–¥—è –¥–æ–≥", "kz_name": "–î—è–¥—è –¥–æ–≥",
     "ru_desc": "–°–æ—Å–∏—Å–∫–∞ –≤ –¥–∞—Ç—Å–∫–æ–π –±—É–ª–æ—á–∫–µ —Å –æ–≤–æ—â–∞–º–∏, —Å–æ—É—Å–∞–º–∏ –∏ —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "kz_desc": "–î–∞–Ω–∏—è–ª—ã“õ —Ç–æ“õ–∞—à—Ç–∞“ì—ã —à“±–∂—ã“õ –∫”©–∫”©–Ω—ñ—Å—Ç–µ—Ä–º–µ–Ω",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [
         {"id": "h2_firm", "ru": "–§–∏—Ä–º–µ–Ω–Ω–∞—è –∫–æ–ª–±–∞—Å–∞", "kz": "–§–∏—Ä–º–∞–ª—ã“õ —à“±–∂—ã“õ", "price": 1490},
         {"id": "h2_smok", "ru": "–ö–æ–ø—á—ë–Ω–∞—è –∫–æ–ª–±–∞—Å–∞", "kz": "–´—Å—Ç–∞“ì—ã–ª–∞–Ω —à“±–∂—ã“õ", "price": 1490},
     ]},
    {"id": "h3", "cat": "hotdogs", "ru_name": "–î—è–¥—è –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π", "kz_name": "–î—è–¥—è –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π",
     "ru_desc": "–°–æ—Å–∏—Å–∫–∞, –±—É–ª–æ—á–∫–∞ –∏ –¥–≤–∞ —Å—Ç–∏–ª—å–Ω—ã—Ö —Å–æ—É—Å–∞. –§—Ä–∏ –∏ —Ö–∞–ª–∞–ø–µ–Ω—å–æ —Ä—è–¥–æ–º",
     "kz_desc": "–®“±–∂—ã“õ, —Ç–æ“õ–∞—à –∂”ô–Ω–µ –µ–∫—ñ –µ—Ä–µ–∫—à–µ —Ç“±–∑–¥—ã“õ",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [
         {"id": "h3_firm", "ru": "–§–∏—Ä–º–µ–Ω–Ω–∞—è –∫–æ–ª–±–∞—Å–∞", "kz": "–§–∏—Ä–º–∞–ª—ã“õ —à“±–∂—ã“õ", "price": 990},
         {"id": "h3_smok", "ru": "–ö–æ–ø—á—ë–Ω–∞—è –∫–æ–ª–±–∞—Å–∞", "kz": "–´—Å—Ç–∞“ì—ã–ª–∞–Ω —à“±–∂—ã“õ", "price": 990},
     ]},

    # –î–Ø–î–Ø –í –õ–ê–í–ê–®–ï
    {"id": "d1", "cat": "doner", "ru_name": "–î—è–¥—è-–¢—ë—Ç—è –¥–æ–Ω–µ—Ä", "kz_name": "–î—è–¥—è-–¢—ë—Ç—è –¥–æ–Ω–µ—Ä",
     "ru_desc": "–ö–æ–≥–¥–∞ –Ω–µ –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å ‚Äî –±–µ—Ä–∏ –≤—Å—ë!",
     "kz_desc": "–¢–∞“£–¥–∞—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞“ì–∞–Ω –∫–µ–∑–¥–µ ‚Äî –±”ô—Ä—ñ–Ω –∞–ª—ã“£—ã–∑!",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [{"id": "d1_mix", "ru": "–ì–æ–≤—è–∂–∏–π+–ö—É—Ä–∏–Ω—ã–π", "kz": "–°–∏—ã—Ä+–¢–∞—É—ã“õ –µ—Ç—ñ", "price": 1990}]},
    {"id": "d2", "cat": "doner", "ru_name": "–î—è–¥—è –¥–æ–Ω–µ—Ä", "kz_name": "–î—è–¥—è –¥–æ–Ω–µ—Ä",
     "ru_desc": "–õ–∞–≤–∞—à —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º: –º—è—Å–æ, –ª—É–∫, —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "kz_desc": "–ú—ñ–Ω–µ–∑—ñ –±–∞—Ä –ª–∞–≤–∞—à: –µ—Ç, –ø–∏—è–∑, —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [{"id": "d2_beef", "ru": "–ì–æ–≤—è–∂–∏–π", "kz": "–°–∏—ã—Ä –µ—Ç—ñ", "price": 1990}]},
    {"id": "d3", "cat": "doner", "ru_name": "–¢—ë—Ç—è –¥–æ–Ω–µ—Ä", "kz_name": "–¢—ë—Ç—è –¥–æ–Ω–µ—Ä",
     "ru_desc": "–ö—É—Ä–∏—Ü–∞ –≤ –ª–∞–≤–∞—à–µ —Å –æ–≤–æ—â–∞–º–∏ –∏ —Ñ—Ä–∏",
     "kz_desc": "–¢–∞—É—ã“õ –ª–∞–≤–∞—à—Ç–∞ –∫”©–∫”©–Ω—ñ—Å—Ç–µ—Ä–º–µ–Ω –∂”ô–Ω–µ —Ñ—Ä–∏–º–µ–Ω",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ñ—Ä–∏ + —Ö–∞–ª–∞–ø–µ–Ω—å–æ",
     "variants": [{"id": "d3_chkn", "ru": "–ö—É—Ä–∏–Ω—ã–π", "kz": "–¢–∞—É—ã“õ –µ—Ç—ñ", "price": 1790}]},

    # –ö–û–õ–ë–ê–°–ö–ò
    {"id": "st3", "cat": "sausages", "ru_name": "–î—è–¥–∏–Ω—ã –∫–æ–ª–±–∞—Å–∫–∏", "kz_name": "–î—è–¥–∏–Ω—ã“£ —à“±–∂—ã“õ—Ç–∞—Ä—ã",
     "ru_desc": "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏–∑ –º—è—Å–∞ –∏ –¥—ã–º–∞ (5 —à—Ç)",
     "kz_desc": "–ï—Ç –ø–µ–Ω —Ç“Ø—Ç—ñ–Ω–Ω–µ–Ω –∂–∞—Å–∞–ª“ì–∞–Ω ”©–Ω–µ—Ä —Ç—É—ã–Ω–¥—ã—Å—ã (5 –¥–∞–Ω–∞)",
     "note_ru": "–ö –ø–æ–¥–∞—á–µ: —Ö–∞–ª–∞–ø–µ–Ω—å–æ + —Å–æ—É—Å + –¥–æ–ª—å–∫–∏ + –º–∏–∫—Å —Å–∞–ª–∞—Ç", "note_kz": "–¢–∞–ø—Å—ã—Ä—ã—Å“õ–∞: —Ö–∞–ª–∞–ø–µ–Ω—å–æ + —Ç“±–∑–¥—ã“õ + —Ç—ñ–ª—ñ–º–¥–µ—Ä + —Å–∞–ª–∞—Ç",
     "variants": [{"id": "st3_1", "ru": "5 —à—Ç", "kz": "5 –¥–∞–Ω–∞", "price": 2790}]},

    # –ó–ê–ö–£–°–ö–ò
    {"id": "sn1", "cat": "snacks", "ru_name": "–°—ã—Ä–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏", "kz_name": "–°—ã—Ä–ª—ã —Ç–∞—è“õ—à–∞–ª–∞—Ä",
     "ru_desc": "5 —à—Ç", "kz_desc": "5 –¥–∞–Ω–∞", "note_ru": "", "note_kz": "",
     "variants": [{"id": "sn1_1", "ru": "5 —à—Ç", "kz": "5 –¥–∞–Ω–∞", "price": 1790}]},
    {"id": "sn2", "cat": "snacks", "ru_name": "–°—Ç—Ä–∏–ø—Å—ã", "kz_name": "–°—Ç—Ä–∏–ø—Å—Ç–µ—Ä",
     "ru_desc": "5 —à—Ç", "kz_desc": "5 –¥–∞–Ω–∞", "note_ru": "", "note_kz": "",
     "variants": [{"id": "sn2_1", "ru": "5 —à—Ç", "kz": "5 –¥–∞–Ω–∞", "price": 1790}]},
    {"id": "sn3", "cat": "snacks", "ru_name": "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏", "kz_name": "–ö–∞—Ä—Ç–æ–ø —Ñ—Ä–∏",
     "ru_desc": "200 –≥—Ä", "kz_desc": "200 –≥—Ä", "note_ru": "", "note_kz": "",
     "variants": [{"id": "sn3_1", "ru": "200 –≥—Ä", "kz": "200 –≥—Ä", "price": 990}]},

    # –ù–ê–ü–ò–¢–ö–ò
    {"id": "dr1", "cat": "drinks", "ru_name": "Coca-Cola 1–ª", "kz_name": "Coca-Cola 1–ª",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr1_1", "ru": "1 –ª", "kz": "1 –ª", "price": 890}]},
    {"id": "dr2", "cat": "drinks", "ru_name": "Coca-Cola –∂–±", "kz_name": "Coca-Cola –∂–±",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr2_1", "ru": "–∂–±", "kz": "–∂–±", "price": 690}]},
    {"id": "dr3", "cat": "drinks", "ru_name": "Coca-Cola Zero –∂–±", "kz_name": "Coca-Cola Zero –∂–±",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr3_1", "ru": "–∂–±", "kz": "–∂–±", "price": 690}]},
    {"id": "dr4", "cat": "drinks", "ru_name": "Sprite –∂–±", "kz_name": "Sprite –∂–±",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr4_1", "ru": "–∂–±", "kz": "–∂–±", "price": 690}]},
    {"id": "dr5", "cat": "drinks", "ru_name": "Coca-Cola —Å—Ç–µ–∫–ª–æ", "kz_name": "Coca-Cola —Å—Ç–µ–∫–ª–æ",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr5_1", "ru": "—Å—Ç–µ–∫–ª–æ", "kz": "—Å—Ç–µ–∫–ª–æ", "price": 690}]},
    {"id": "dr6", "cat": "drinks", "ru_name": "Fuze Tea –º–∞–Ω–≥–æ-–∞–Ω–∞–Ω–∞—Å 0.5–ª", "kz_name": "Fuze Tea –º–∞–Ω–≥–æ-–∞–Ω–∞–Ω–∞—Å 0.5–ª",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr6_1", "ru": "0.5 –ª", "kz": "0.5 –ª", "price": 690}]},
    {"id": "dr7", "cat": "drinks", "ru_name": "Fuze Tea –∞–Ω–∞–Ω–∞—Å-—Ä–æ–º–∞—à–∫–∞ 0.5–ª", "kz_name": "Fuze Tea –∞–Ω–∞–Ω–∞—Å-—Ä–æ–º–∞—à–∫–∞ 0.5–ª",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr7_1", "ru": "0.5 –ª", "kz": "0.5 –ª", "price": 690}]},
    {"id": "dr8", "cat": "drinks", "ru_name": "–ê–π—Ä–∞–Ω", "kz_name": "–ê–π—Ä–∞–Ω",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "dr8_1", "ru": "1 —à—Ç", "kz": "1 –¥–∞–Ω–∞", "price": 300}]},

    # –î–û–ë–ê–í–ö–ò
    {"id": "ex1", "cat": "extras", "ru_name": "–î–æ–ø. –∫–æ—Ç–ª–µ—Ç–∞ –≥–æ–≤—è–∂—å—è", "kz_name": "“ö–æ—Å—ã–º—à–∞ —Å–∏—ã—Ä –∫–æ—Ç–ª–µ—Ç—ñ",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "ex1_1", "ru": "1 —à—Ç", "kz": "1 –¥–∞–Ω–∞", "price": 990}]},
    {"id": "ex2", "cat": "extras", "ru_name": "–î–æ–ø. –∫–æ—Ç–ª–µ—Ç–∞ –∫—É—Ä–∏–Ω–∞—è", "kz_name": "“ö–æ—Å—ã–º—à–∞ —Ç–∞—É—ã“õ –∫–æ—Ç–ª–µ—Ç—ñ",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "ex2_1", "ru": "1 —à—Ç", "kz": "1 –¥–∞–Ω–∞", "price": 990}]},
    {"id": "ex3", "cat": "extras", "ru_name": "–î–æ–ø. —Å—ã—Ä", "kz_name": "“ö–æ—Å—ã–º—à–∞ —ñ—Ä—ñ–º—à—ñ–∫",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "ex3_1", "ru": "–ø–æ—Ä—Ü–∏—è", "kz": "–ø–æ—Ä—Ü–∏—è", "price": 690}]},
    {"id": "ex4", "cat": "extras", "ru_name": "–î–æ–ø. –≥—Ä–∏–±—ã", "kz_name": "“ö–æ—Å—ã–º—à–∞ —Å–∞“£—ã—Ä–∞—É“õ“±–ª–∞“õ",
     "ru_desc": "", "kz_desc": "", "note_ru": "", "note_kz": "",
     "variants": [{"id": "ex4_1", "ru": "–ø–æ—Ä—Ü–∏—è", "kz": "–ø–æ—Ä—Ü–∏—è", "price": 690}]},
]

# –ò–Ω–¥–µ–∫—Å—ã
ITEMS_BY_ID = {i["id"]: i for i in MENU_ITEMS}
VARIANTS_BY_ID = {}
for item in MENU_ITEMS:
    for v in item["variants"]:
        VARIANTS_BY_ID[v["id"]] = {**v, "item_id": item["id"]}


# ==========================================
# üîç –ü–ê–†–°–ï–† –¢–ï–ö–°–¢–û–í–´–• –ó–ê–ö–ê–ó–û–í
# ==========================================

# (keywords, variant_id, priority) ‚Äî —á–µ–º –±–æ–ª—å—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–µ–º —Ç–æ—á–Ω–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
_ALIASES = [
    # –ë–£–†–ì–ï–†–´
    (["—Å—ã—Ä–Ω", "–≥–æ–≤—è"], "b1_beef", 10),
    (["—Å—ã—Ä–Ω", "–∫—É—Ä–∏"], "b1_chkn", 10),
    (["—Å—ã—Ä–Ω"], "b1_beef", 5),
    (["–≥—Ä–∏–±–Ω", "–±—É—Ä–≥–µ—Ä", "–≥–æ–≤—è"], "b2_beef", 12),
    (["–≥—Ä–∏–±–Ω", "–±—É—Ä–≥–µ—Ä", "–∫—É—Ä–∏"], "b2_chkn", 12),
    (["–≥—Ä–∏–±–Ω", "–±—É—Ä–≥–µ—Ä"], "b2_beef", 8),
    (["–≥—Ä–∏–±–Ω", "–≥–æ–≤—è"], "b2_beef", 10),
    (["–≥—Ä–∏–±–Ω", "–∫—É—Ä–∏"], "b2_chkn", 10),
    (["–≥—Ä–∏–±–Ω"], "b2_beef", 5),
    (["–∫–ª–∞—Å—Å–∏—á", "–≥–æ–≤—è"], "b3_beef", 10),
    (["–∫–ª–∞—Å—Å–∏—á", "–∫—É—Ä–∏"], "b3_chkn", 10),
    (["–∫–ª–∞—Å—Å–∏—á"], "b3_beef", 5),
    (["–±—É—Ä–≥–µ—Ä", "–≥–æ–≤—è"], "b1_beef", 3),
    (["–±—É—Ä–≥–µ—Ä", "–∫—É—Ä–∏"], "b1_chkn", 3),
    (["–±—É—Ä–≥–µ—Ä"], "b1_beef", 1),

    # –•–û–¢-–î–û–ì–ò
    (["–¥–æ–≥", "–≥—Ä–∏–±–Ω"], "h1_firm", 8),
    (["—Ñ—Ä–∞–Ω—Ü—É–∑", "–¥–æ–≥"], "h3_firm", 8),
    (["—Ñ—Ä–∞–Ω—Ü—É–∑"], "h3_firm", 6),
    (["—Ö–æ—Ç–¥–æ–≥"], "h2_firm", 5),
    (["—Ö–æ—Ç-–¥–æ–≥"], "h2_firm", 5),
    (["—Ö–æ—Ç", "–¥–æ–≥"], "h2_firm", 4),

    # –î–û–ù–ï–†–´
    (["–¥—è–¥—è", "—Ç–µ—Ç", "–¥–æ–Ω–µ—Ä"], "d1_mix", 10),
    (["–¥–æ–Ω–µ—Ä", "–≥–æ–≤—è"], "d2_beef", 8),
    (["–¥–æ–Ω–µ—Ä", "–∫—É—Ä–∏"], "d3_chkn", 8),
    (["—Ç–µ—Ç", "–¥–æ–Ω–µ—Ä"], "d3_chkn", 8),
    (["–¥–æ–Ω–µ—Ä"], "d2_beef", 3),
    (["–ª–∞–≤–∞—à", "–≥–æ–≤—è"], "d2_beef", 6),
    (["–ª–∞–≤–∞—à", "–∫—É—Ä–∏"], "d3_chkn", 6),
    (["–ª–∞–≤–∞—à"], "d2_beef", 3),
    (["—à–∞—É—Ä–º"], "d2_beef", 2),
    (["—à–∞–≤–µ—Ä–º"], "d2_beef", 2),

    # –ö–û–õ–ë–ê–°–ö–ò
    (["–∫–æ–ª–±–∞—Å"], "st3_1", 6),

    # –ó–ê–ö–£–°–ö–ò
    (["—Å—ã—Ä–Ω", "–ø–∞–ª–æ—á"], "sn1_1", 10),
    (["–ø–∞–ª–æ—á"], "sn1_1", 6),
    (["—Å—Ç—Ä–∏–ø—Å"], "sn2_1", 8),
    (["–Ω–∞–≥–≥–µ—Ç—Å"], "sn2_1", 4),
    (["–∫–∞—Ä—Ç–æ—à", "—Ñ—Ä–∏"], "sn3_1", 8),
    (["–∫–∞—Ä—Ç–æ—Ñ–µ–ª"], "sn3_1", 6),
    (["—Ñ—Ä–∏"], "sn3_1", 5),

    # –ù–ê–ü–ò–¢–ö–ò
    (["–∫–æ–ª", "1–ª"], "dr1_1", 10),
    (["–∫–æ–ª", "–ª–∏—Ç—Ä"], "dr1_1", 10),
    (["–∫–æ–∫", "1–ª"], "dr1_1", 10),
    (["–∫–æ–∫", "–ª–∏—Ç—Ä"], "dr1_1", 10),
    (["–∫–æ–ª", "zero"], "dr3_1", 10),
    (["–∫–æ–∫", "zero"], "dr3_1", 10),
    (["–∫–æ–ª", "–∑–µ—Ä–æ"], "dr3_1", 10),
    (["–∫–æ–∫", "–∑–µ—Ä–æ"], "dr3_1", 10),
    (["zero"], "dr3_1", 5),
    (["–∑–µ—Ä–æ"], "dr3_1", 5),
    (["–∫–æ–ª", "—Å—Ç–µ–∫–ª"], "dr5_1", 8),
    (["–∫–æ–∫", "—Å—Ç–µ–∫–ª"], "dr5_1", 8),
    (["–∫–æ–ª", "–∂–±"], "dr2_1", 8),
    (["–∫–æ–∫", "–∂–±"], "dr2_1", 8),
    (["–∫–æ–ª", "–±–∞–Ω–∫"], "dr2_1", 7),
    (["–∫–æ–∫", "–±–∞–Ω–∫"], "dr2_1", 7),
    (["–∫–æ–ª–∞"], "dr2_1", 4),
    (["–∫–æ–ª—É"], "dr2_1", 4),
    (["coca"], "dr2_1", 4),
    (["–ø–µ–ø—Å–∏"], "dr2_1", 2),
    (["—Å–ø—Ä–∞–π—Ç"], "dr4_1", 8),
    (["sprite"], "dr4_1", 8),
    (["—Ñ—å—é–∑", "–º–∞–Ω–≥–æ"], "dr6_1", 10),
    (["fuze", "–º–∞–Ω–≥–æ"], "dr6_1", 10),
    (["—á–∞–π", "–º–∞–Ω–≥–æ"], "dr6_1", 8),
    (["—Ñ—å—é–∑", "—Ä–æ–º–∞—à–∫"], "dr7_1", 10),
    (["fuze", "—Ä–æ–º–∞—à–∫"], "dr7_1", 10),
    (["—á–∞–π", "—Ä–æ–º–∞—à–∫"], "dr7_1", 8),
    (["—Ñ—å—é–∑"], "dr6_1", 4),
    (["fuze"], "dr6_1", 4),
    (["–∞–π—Ä–∞–Ω"], "dr8_1", 8),
    (["–ø–µ–ø—Å–∏"], "dr2_1", 1),

    # –î–û–ë–ê–í–ö–ò
    (["–¥–æ–ø", "–∫–æ—Ç–ª–µ—Ç", "–≥–æ–≤—è"], "ex1_1", 10),
    (["–¥–æ–ø", "–∫–æ—Ç–ª–µ—Ç", "–∫—É—Ä–∏"], "ex2_1", 10),
    (["–¥–æ–ø", "—Å—ã—Ä"], "ex3_1", 8),
    (["–¥–æ–ø", "–≥—Ä–∏–±"], "ex4_1", 8),
]

# –°–ª–æ–≤–∞-—Å—Ç–æ–ø: –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º –∑–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
_STOP_WORDS = {
    "–ø—Ä–∏–≤–µ—Ç", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ", "—Å–∞–ª–µ–º", "—Å”ô–ª–µ–º", "—Å–∞–ª–∞–º", "hello", "hi",
    "—Å–ø–∞—Å–∏–±–æ", "—Ä–∞—Ö–º–µ—Ç", "–æ–∫", "ok", "–¥–∞", "–Ω–µ—Ç", "–∂–æ–∫", "–∏—è",
    "—Ö–æ—Ä–æ—à–æ", "–ª–∞–¥–Ω–æ", "–ø–æ–Ω—è–ª", "–¥–æ–±—Ä–æ", "–∫–ª–∞—Å—Å", "–∫—Ä—É—Ç–æ",
    "–∫–∞–∫ –¥–µ–ª–∞", "—á—Ç–æ –Ω–æ–≤–æ–≥–æ",
}

def parse_text_order(text):
    """
    –ü–∞—Ä—Å–∏—Ç —Ç–µ–∫—Å—Ç —Ç–∏–ø–∞ ¬´2 —Å—ã—Ä–Ω—ã—Ö –≥–æ–≤—è–∂—å–∏—Ö –∏ –∫–æ–ª—É¬ª 
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ (variant_id, qty) –∏–ª–∏ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
    """
    txt = text.lower().strip()
    
    # –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∏–ª–∏ —Å—Ç–æ–ø-—Å–ª–æ–≤–æ
    if len(txt) < 3 or txt in _STOP_WORDS:
        return []
    
    # –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ "–∏", ",", "+", ";"
    parts = re.split(r'\s*[,;+]\s*|\s+–∏\s+|\s+–∂”ô–Ω–µ\s+', txt)
    
    results = []
    for part in parts:
        part = part.strip()
        if not part:
            continue
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (—á–∏—Å–ª–æ –≤ –Ω–∞—á–∞–ª–µ –∏–ª–∏ –≤ –∫–æ–Ω—Ü–µ)
        qty = 1
        qty_match = re.match(r'^(\d+)\s+', part)
        if qty_match:
            qty = min(int(qty_match.group(1)), 20)
            part = part[qty_match.end():]
        else:
            qty_match = re.search(r'\s+(\d+)\s*$', part)
            if qty_match:
                qty = min(int(qty_match.group(1)), 20)
                part = part[:qty_match.start()]
        
        if not part.strip():
            continue
        
        # –ò—â–µ–º –ª—É—á—à–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –∞–ª–∏–∞—Å–∞–º
        best_vid = None
        best_prio = -1
        
        for keywords, vid, prio in _ALIASES:
            matched = True
            for kw in keywords:
                if kw not in part:
                    matched = False
                    break
            if matched and prio > best_prio:
                best_vid = vid
                best_prio = prio
        
        if best_vid:
            # –°—É–º–º–∏—Ä—É–µ–º –µ—Å–ª–∏ —Ç–æ—Ç –∂–µ —Ç–æ–≤–∞—Ä —É–∂–µ –µ—Å—Ç—å
            existing = next((r for r in results if r[0] == best_vid), None)
            if existing:
                results.remove(existing)
                results.append((best_vid, existing[1] + qty))
            else:
                results.append((best_vid, qty))
    
    return results
